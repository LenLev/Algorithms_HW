Доказательство сложности O(N) для makeheap

Алгоритм makeheap(arr) строит мин-кучу, вызывая sift_down для всех внутр. узлов массива длины n — от индекса n//2 - 1 до 0

Оценка времени работы

Высота кучи H = floor(log₂ n)
Узлов на уровне h от листьев: примерно n / 2^{h+1}

Для узла на высоте h выполнение sift_down требует не более O(h) операций

Время на уровень: C * (n / 2^{h+1}) * h
C - константа

Суммарное время:
T <= C * n * ∑_{h=0}^{H} (h / 2^{h+1})

Считаем сумму:
S = ∑_{h=0}^{∞} h / 2^{h+1}

Используем формулу: ∑{h=0}^{∞} x^h = 1/(1−x)
Дифференцируем: ∑{h=0}^{∞} h x^h = x / (1−x)^2

Подставляем x = 1/2:
∑_{h=0}^{∞} h / 2^h = 2

Тогда: S = (1/2) * 2 = 1

Итог:
∑_{h=0}^{H} (h / 2^{h+1}) ≤ 1
T <= C * n * 1 = O(n)

Вывод: алгоритм работает за линейное время O(n)